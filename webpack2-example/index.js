import * as THREE from 'three';
import { Canvas, View, Object3, Presentation, easing, Tween } from 'awv3';

const canvas = new Canvas({ dom: '#main' });
const view = new View(canvas, {
    up: new THREE.Vector3(0, 1, 0),
    near: 10,
    far: 2000,
    minDistance: 100,
    maxDistance: 1500,
    ambientIntensity: 1.2
});

let model = {"command":"Blob","data": {"containers":[{"id":266,"owner":210,"properties":{"color":[183,183,183],"opacity":1,"layer":"0","min":[-100,-10,0],"max":[15,14.5,24]},"meshes":[{"id":307,"vertices":[-100,10,0,2,10,0,6.5,14.5,0,15,14.5,0,15,-10,0,-100,-10,0],"normals":[0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1],"indices":[3,1,2,1,5,0,1,4,5,1,3,4],"edges":[296,297,313,240,241,311],"properties":{"surface":{"type":"plane","pointOnPlane":[-107.169,-62.419,0],"normal":[0,0,-1]}}},{"id":359,"vertices":[-100,-10,20,-100,10,20,-100,10,0,-100,-10,0],"normals":[-1,0,0,-1,0,0,-1,0,0,-1,0,0],"indices":[1,3,0,3,1,2],"edges":[353,364,311,366],"properties":{"surface":{"type":"plane","pointOnPlane":[-100,-10,0],"normal":[-1,0,0]}}},{"id":356,"vertices":[-100,-10,20,0,-10,20,0,9.5,20,0,10,20,-100,10,20],"normals":[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1],"indices":[2,0,1,4,2,3,0,2,4],"edges":[378,424,423,375,353],"properties":{"surface":{"type":"plane","pointOnPlane":[0,20,20],"normal":[0,0,1]}}},{"id":409,"vertices":[0,10,20,0,9.5,20,0,9.53,18.652,0,9.621,17.284,0,9.777,15.898,0,10,14.5],"normals":[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0],"indices":[2,0,1,0,4,5,0,3,4,0,2,3],"edges":[423,408,433],"properties":{"surface":{"type":"plane","pointOnPlane":[0,-9.6,51.1],"normal":[1,0,0]}}},{"id":411,"vertices":[2.329,10.329,12.938,2,10,14.5,0,10,14.5,0,9.777,15.898,0,9.621,17.284,0,9.53,18.652,0,9.5,20,15,9.5,20,15,9.569,17.947,15,9.784,15.85,15,10.153,13.723,15,10.684,11.584,15,11.383,9.449,15,12.252,7.338,15,13.292,5.271,15,14.5,3.267,6.5,14.5,3.267,5.738,13.738,4.49,5.023,13.023,5.769,4.361,12.361,7.103,3.755,11.755,8.49,3.211,11.211,9.928,2.734,10.734,11.412],"normals":[0,0.973,0.232,0,0.984,0.18,0,0.984,0.18,0,0.991,0.134,0,0.996,0.089,0,0.999,0.044,0,1,0,0,1,0,0,0.998,0.067,0,0.991,0.136,0,0.979,0.206,0,0.961,0.276,0,0.938,0.346,0,0.91,0.415,0,0.876,0.483,0,0.836,0.549,0,0.836,0.549,0,0.861,0.509,0,0.884,0.467,0,0.906,0.423,0,0.926,0.377,0,0.944,0.33,0,0.96,0.282],"indices":[17,14,16,16,14,15,8,6,7,8,5,6,8,4,5,9,4,8,9,3,4,9,2,3,9,1,2,10,1,9,10,0,1,10,22,0,11,22,10,11,21,22,12,21,11,12,20,21,13,20,12,13,19,20,13,18,19,14,18,13,14,17,18],"edges":[438,434,408,410,435,437],"properties":{"surface":{"type":"cylinder","origin":[0,40,20],"axis":[1,0,0],"radius":30.5,"height":15}}},{"id":412,"vertices":[0,9.5,20,4,9.5,24,15,9.5,24,15,9.5,20],"normals":[0,1,0,0,1,0,0,1,0,0,1,0],"indices":[1,3,0,3,1,2],"edges":[440,439,436,410],"properties":{"surface":{"type":"plane","pointOnPlane":[0,9.5,20],"normal":[0,1,0]}}},{"id":417,"vertices":[15,9.5,24,4,9.5,24,4,-10,24,15,-10,24],"normals":[0,0,1,0,0,1,0,0,1,0,0,1],"indices":[1,3,0,3,1,2],"edges":[439,422,362,419],"properties":{"surface":{"type":"plane","pointOnPlane":[-107.169,-62.419,24],"normal":[0,0,1]}}},{"id":418,"vertices":[4,9.5,24,0,9.5,20,0,-10,20,4,-10,24],"normals":[-0.707,0,0.707,-0.707,0,0.707,-0.707,0,0.707,-0.707,0,0.707],"indices":[1,3,0,3,1,2],"edges":[440,424,379,422],"properties":{"surface":{"type":"plane","pointOnPlane":[20,20,40],"normal":[-0.707,0,0.707]}}},{"id":361,"vertices":[4,-10,24,0,-10,20,-100,-10,20,-100,-10,0,15,-10,0,15,-10,24],"normals":[0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0],"indices":[3,1,2,0,4,5,1,4,0,1,3,4],"edges":[379,378,366,241,255,362],"properties":{"surface":{"type":"plane","pointOnPlane":[15,-10,0],"normal":[0,-1,0]}}},{"id":416,"vertices":[15,9.5,20,15,9.5,24,15,-10,24,15,-10,0,15,14.5,0,15,14.5,3.267,15,13.292,5.271,15,12.252,7.338,15,11.383,9.449,15,10.684,11.584,15,10.153,13.723,15,9.784,15.85,15,9.569,17.947],"normals":[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0],"indices":[6,4,5,2,0,1,3,0,2,3,12,0,3,11,12,3,10,11,3,9,10,3,8,9,4,8,3,4,7,8,4,6,7],"edges":[436,419,255,240,420,435],"properties":{"surface":{"type":"plane","pointOnPlane":[15,14.5,0],"normal":[1,0,0]}}},{"id":413,"vertices":[6.5,14.5,3.267,15,14.5,3.267,15,14.5,0,6.5,14.5,0],"normals":[0,1,0,0,1,0,0,1,0,0,1,0],"indices":[1,3,0,3,1,2],"edges":[437,420,313,425],"properties":{"surface":{"type":"plane","pointOnPlane":[-100,14.5,0],"normal":[0,1,0]}}},{"id":414,"vertices":[2,10,14.5,2.329,10.329,12.938,2.734,10.734,11.412,3.211,11.211,9.928,3.755,11.755,8.49,4.361,12.361,7.103,5.023,13.023,5.769,5.738,13.738,4.49,6.5,14.5,3.267,6.5,14.5,0,2,10,0],"normals":[-0.707,0.707,0,-0.707,0.707,0,-0.707,0.707,0,-0.707,0.707,0,-0.707,0.707,0,-0.707,0.707,0,-0.707,0.707,0,-0.707,0.707,0,-0.707,0.707,0,-0.707,0.707,0,-0.707,0.707,0],"indices":[9,7,8,1,10,0,2,10,1,3,10,2,4,10,3,5,10,4,6,10,5,6,9,10,7,9,6],"edges":[438,425,297,421],"properties":{"surface":{"type":"plane","pointOnPlane":[18.263,26.263,0],"normal":[-0.707,0.707,0]}}},{"id":415,"vertices":[0,10,14.5,2,10,14.5,2,10,0,-100,10,0,-100,10,20,0,10,20],"normals":[0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],"indices":[0,4,5,2,0,1,3,0,2,4,0,3],"edges":[434,421,296,364,375,433],"properties":{"surface":{"type":"plane","pointOnPlane":[2,10,0],"normal":[0,1,0]}}}],"edges":[{"id":438,"points":[2,10,14.5,2.329,10.329,12.938,2.734,10.734,11.412,3.211,11.211,9.928,3.755,11.755,8.49,4.361,12.361,7.103,5.023,13.023,5.769,5.738,13.738,4.49,6.5,14.5,3.267]}],"lines":[{"id":419,"points":[15,9.5,24,15,-10,24]},{"id":255,"points":[15,-10,0,15,-10,24]},{"id":420,"points":[15,14.5,0,15,14.5,3.267]},{"id":240,"points":[15,14.5,0,15,-10,0]},{"id":241,"points":[15,-10,0,-100,-10,0]},{"id":311,"points":[-100,-10,0,-100,10,0]},{"id":362,"points":[15,-10,24,4,-10,24]},{"id":313,"points":[6.5,14.5,0,15,14.5,0]},{"id":297,"points":[6.5,14.5,0,2,10,0]},{"id":296,"points":[2,10,0,-100,10,0]},{"id":364,"points":[-100,10,0,-100,10,20]},{"id":421,"points":[2,10,0,2,10,14.5]},{"id":375,"points":[0,10,20,-100,10,20]},{"id":366,"points":[-100,-10,0,-100,-10,20]},{"id":353,"points":[-100,10,20,-100,-10,20]},{"id":422,"points":[4,-10,24,4,9.5,24]},{"id":378,"points":[-100,-10,20,0,-10,20]},{"id":379,"points":[0,-10,20,4,-10,24]},{"id":423,"points":[0,10,20,0,9.5,20]},{"id":433,"points":[0,10,14.5,0,10,20]},{"id":434,"points":[0,10,14.5,2,10,14.5]},{"id":424,"points":[0,9.5,20,0,-10,20]},{"id":436,"points":[15,9.5,24,15,9.5,20]},{"id":425,"points":[6.5,14.5,3.267,6.5,14.5,0]},{"id":437,"points":[6.5,14.5,3.267,15,14.5,3.267]},{"id":439,"points":[4,9.5,24,15,9.5,24]},{"id":440,"points":[0,9.5,20,4,9.5,24]},{"id":410,"points":[0,9.5,20,15,9.5,20]}],"arcs":[{"id":435,"center":[15,40,20],"zAxis":[1,0,0],"xAxis":[0,-0.83607,-0.54863],"angle":-0.58072,"radius":30.5,"isCircle":false},{"id":408,"center":[0,40,20],"zAxis":[1,0,0],"xAxis":[0,-0.98361,-0.18033],"angle":-0.18132,"radius":30.5,"isCircle":false}]}],"properties":{"version":1}}};

canvas.parser.parse(model, { material: 'multi' }).then(context => {
    view.scene.add(context.models);
    view.controls.focus().zoom();
});
